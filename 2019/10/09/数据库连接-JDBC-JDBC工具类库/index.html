<!DOCTYPE html>
<html lang="zh-CN">
    <!-- title -->




<!-- keywords -->




<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Summer">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Summer">
    
    <meta name="keywords" content="summer,summer-theme,summer-blog">
    
    <meta name="description" content="Summer'sSky">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>数据库连接-JDBC*JDBC工具类库 · Summer&#39;s Sky</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href="/css/style.css?v=20180824" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/css/mobile.css?v=20180824" media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href="/assets/favicon.ico">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js" as="script">
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
</head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >Summer&#39;s Sky.</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">数据库连接-JDBC*JDBC工具类库</a>
            </div>
    </div>
    
    <a class="home-link" href=/>Summer's Sky.</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style="







height:50vh;
">
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            数据库连接-JDBC*JDBC工具类库
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "数据库连接池">数据库连接池</a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>字数统计: <span class="post-count word-count">9.4k</span>阅读时长: <span class="post-count reading-time">41 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2019/10/09</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p><font color="#00ff00"><strong>工欲善其事，必先利其器：</strong></font></p>
<p>下载第三方jar包：<a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a></p>
<p>需要一个jar包：mysql-connector-java-版本号.jar</p>
<h2 id="理论"><a href="#理论" class="headerlink" title="理论"></a>理论</h2><h3 id="相关定义"><a href="#相关定义" class="headerlink" title="相关定义"></a>相关定义</h3><p>JDBC（为java database connectivity 的缩写）</p>
<h3 id="四个核心体系"><a href="#四个核心体系" class="headerlink" title="四个核心体系"></a>四个核心体系</h3><p>1.连接<strong>DriverManger</strong> </p>
<p>2.对象<strong>Connect</strong> </p>
<p>3.状态<strong>statement</strong> </p>
<p>4.结果<strong>ResultSet</strong></p>
<p><font color="#ff0000">针对不同的<strong>数据库</strong>，获取对象Connection需要的参数URL：</font></p>
<ol>
<li>数据库：sqLite</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">驱动程序包名：sqlitejdbc-v056.jar</span><br><span class="line">驱动程序类名: org.sqlite.JDBC</span><br><span class="line">JDBC URL: jdbc:sqlite:c:\*.db</span><br><span class="line">默认端口 无</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Microsoft SQL Serve</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Microsoft SQL Server JDBC Driver （一般用来连接 SQLServer <span class="number">2000</span>）</span><br><span class="line">驱动程序包名：msbase.jar mssqlserver.jar msutil.jar</span><br><span class="line">驱动程序类名: com.microsoft.jdbc.sqlserver.SQLServerDriver</span><br><span class="line">JDBC URL: jdbc:microsoft:sqlserver:<span class="comment">//&lt;server_name&gt;:&lt;port&gt;</span></span><br><span class="line">默认端口<span class="number">1433</span>，如果服务器使用默认端口则port可以省略</span><br><span class="line">Microsoft SQL Server <span class="number">2005</span> JDBC Driver</span><br><span class="line">驱动程序包名：sqljdbc.jar</span><br><span class="line">驱动程序类名: com.microsoft.sqlserver.jdbc.SQLServerDriver</span><br><span class="line">JDBC URL: jdbc:sqlserver:<span class="comment">//&lt;server_name&gt;:&lt;port&gt;</span></span><br><span class="line">默认端口<span class="number">1433</span>，如果服务器使用默认端口则port可以省略</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Oracle</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Oracle Thin JDBC Driver</span><br><span class="line">驱动程序包名：ojdbc14.jar</span><br><span class="line">驱动程序类名: oracle.jdbc.driver.OracleDriver</span><br><span class="line">JDBC URL:</span><br><span class="line">jdbc:oracle:thin:@<span class="comment">//&lt;host&gt;:&lt;port&gt;/ServiceName</span></span><br><span class="line">或</span><br><span class="line">jdbc:oracle:thin:@&lt;host&gt;:&lt;port&gt;:&lt;SID&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>IBM DB2</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IBM DB2 Universal Driver Type <span class="number">4</span></span><br><span class="line"> </span><br><span class="line">驱动程序包名：db2jcc.jar db2jcc_license_cu.jar</span><br><span class="line">驱动程序类名: com.ibm.db2.jcc.DB2Driver</span><br><span class="line">JDBC URL: jdbc:db2:<span class="comment">//&lt;host&gt;[:&lt;port&gt;]/&lt;database_name&gt;</span></span><br><span class="line">IBM DB2 Universal Driver Type <span class="number">2</span></span><br><span class="line"> </span><br><span class="line">驱动程序包名：db2jcc.jar db2jcc_license_cu.jar</span><br><span class="line">驱动程序类名: com.ibm.db2.jcc.DB2Driver</span><br><span class="line">JDBC URL: jdbc:db2:&lt;database_name&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>MySQL</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MySQL Connector/J Driver</span><br><span class="line">驱动程序包名：mysql-connector-java-x.x.xx-bin.jar</span><br><span class="line">驱动程序类名: com.mysql.jdbc.Driver</span><br><span class="line">JDBC URL: jdbc:mysql:<span class="comment">//&lt;host&gt;:&lt;port&gt;/&lt;database_name&gt;</span></span><br><span class="line">默认端口<span class="number">3306</span>，如果服务器使用默认端口则port可以省略</span><br><span class="line">MySQL Connector/J Driver 允许在URL中添加额外的连接属性</span><br><span class="line">jdbc:mysql:<span class="comment">//&lt;host&gt;:&lt;port&gt;/&lt;database_name&gt;?property1=value1&amp;property2=value2</span></span><br><span class="line">注意： 需要操作记录为了避免乱码应该加上属性 useUnicode=<span class="keyword">true</span>&amp;characterEncoding=utf8 ，比如</span><br><span class="line">jdbc:mysql:<span class="comment">//192.168.177.129:3306/report?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"></span><br><span class="line">Time Out超时处理：</span><br><span class="line">URL = <span class="string">"jdbc:mysql://localhost:3306/employee serverTimezone=UTC&amp;characterEncoding=utf-8"</span>;</span><br></pre></td></tr></table></figure>

<h2 id="程序实现—JDBC连接数据库"><a href="#程序实现—JDBC连接数据库" class="headerlink" title="程序实现—JDBC连接数据库"></a>程序实现—JDBC连接数据库</h2><h3 id="加载驱动程序"><a href="#加载驱动程序" class="headerlink" title="加载驱动程序"></a>加载驱动程序</h3><p><strong>关键词：</strong>Class.forName（”com.mysql.cj.jdbc.Driver”）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    加载驱动程序，驱动程序只需要加载一次，</span></span><br><span class="line"><span class="comment">    而且是在使用之前加载。所以加载驱动程序需要放到静态代码块里面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">静态代码块程序开始运行时只执行一次。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="获取connection的对象"><a href="#获取connection的对象" class="headerlink" title="获取connection的对象"></a>获取connection的对象</h3><p><strong>关键词：</strong>DriverManager.getConnection(URL,USER,PASSWORD);//驱动管理调用方法得到Connection对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">jdbc:mysql://localhost:3306/mysql_study?serverTimezone=UTC&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="comment">如果乱码那么需要给URL路径后面补充：?serverTimezone=UTC&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>  String URL = <span class="string">"jdbc:mysql://localhost:3306/mysql_study?serverTimezone=UTC&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  String USER = <span class="string">"root"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  String PASSWORD = <span class="string">"summer"</span>;</span><br><span class="line"><span class="comment">//获取Connection的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnect</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = DriverManager.getConnection(URL,USER,PASSWORD);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  connection;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="statement对象获取并对数据库进行操作"><a href="#statement对象获取并对数据库进行操作" class="headerlink" title="statement对象获取并对数据库进行操作"></a>statement对象获取并对数据库进行操作</h3><h4 id="增添数据到数据库"><a href="#增添数据到数据库" class="headerlink" title="增添数据到数据库"></a>增添数据到数据库</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.获取connection对象</span></span><br><span class="line">        Connection connection = ConnectUtil.getConnect();</span><br><span class="line">        Statement statement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//2.创建statement对象createStatement()</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            <span class="comment">//3.创建sql语句，statement对象调用</span></span><br><span class="line">            <span class="comment">//3.1可以创建一个工具类用来接收输入的student对象,作为添加sql语句的字段值。</span></span><br><span class="line">            String sql = (<span class="string">"insert into mysql_study.student(name,age,sex) values "</span> + <span class="string">"("</span> + getStudent(student) + <span class="string">")"</span>);</span><br><span class="line">            <span class="comment">//4.ResultSet结果对象executeUpdate(sql)；</span></span><br><span class="line">            <span class="keyword">int</span> temp = statement.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span> (temp != <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"数据添加成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//5.关闭对象</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            CloseUtil.closeAll(connection,statement,<span class="keyword">null</span>);</span><br><span class="line">            <span class="comment">//最后要关闭连接------------------------------------</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="更新数据库数据"><a href="#更新数据库数据" class="headerlink" title="更新数据库数据"></a>更新数据库数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateStudent</span><span class="params">(String name,<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="comment">//1 connection</span></span><br><span class="line">        Connection connection = ConnectUtil.getConnect();</span><br><span class="line">        Statement statement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//2 statement</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">"update student set name = "</span> + <span class="string">"'"</span> + name + <span class="string">"' "</span> + <span class="string">"where id = "</span> + id;</span><br><span class="line">            <span class="comment">//3 executeUpdate()</span></span><br><span class="line">            <span class="keyword">int</span> temp = statement.executeUpdate(sql);  <span class="comment">//返回的值即为影响了几条sql语句</span></span><br><span class="line">            <span class="keyword">if</span> (temp != <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"更新数据库成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4.closeAll()</span></span><br><span class="line">            CloseUtil.closeAll(connection,statement,<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="删除数据库数据"><a href="#删除数据库数据" class="headerlink" title="删除数据库数据"></a>删除数据库数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteStudent</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="comment">//1 connection</span></span><br><span class="line">        Connection connection = ConnectUtil.getConnect();</span><br><span class="line">        Statement statement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//2 statement</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">"delete from student where name = "</span> + <span class="string">"'"</span> + name + <span class="string">"'"</span> ;</span><br><span class="line">            <span class="comment">//3 executeUpdate()</span></span><br><span class="line">            <span class="keyword">int</span> temp = statement.executeUpdate(sql);  <span class="comment">//返回的值即为影响了几条sql语句</span></span><br><span class="line">            <span class="keyword">if</span> (temp != <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"根据姓名字段删除数据库成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4 closeAll()</span></span><br><span class="line">            CloseUtil.closeAll(connection,statement,<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="查询数据库数据"><a href="#查询数据库数据" class="headerlink" title="查询数据库数据"></a>查询数据库数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询数据库数据 需要返回list集合用来存储表中student对象。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectStudent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1 connection</span></span><br><span class="line">        Connection connection = ConnectUtil.getConnect();</span><br><span class="line">        Statement statement = <span class="keyword">null</span>;</span><br><span class="line">        List&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line">        <span class="comment">//2 statement</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">"select * from student"</span> ;</span><br><span class="line">            <span class="comment">//3.executeQuery(sql);</span></span><br><span class="line">            ResultSet set = statement.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (set.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> id = set.getInt(<span class="number">1</span>);</span><br><span class="line">                <span class="comment">//String name = set.getString(2); //可以根据字段名来写，也可以根据第几列来写。</span></span><br><span class="line">                String name = set.getString(<span class="string">"name"</span>);</span><br><span class="line">                <span class="keyword">int</span> age = set.getInt(<span class="number">3</span>);</span><br><span class="line">                String sex = set.getString(<span class="number">4</span>);</span><br><span class="line">                Student student = <span class="keyword">new</span> Student(id,name,age,sex);</span><br><span class="line">                list.add(student);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4 closeAll()</span></span><br><span class="line">            CloseUtil.closeAll(connection,statement,<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Resultset获取操作结果"><a href="#Resultset获取操作结果" class="headerlink" title="Resultset获取操作结果"></a>Resultset获取操作结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ResultSet set = statement.executeQuery(sql);</span><br><span class="line"><span class="comment">//遍历结果集</span></span><br><span class="line"><span class="keyword">while</span> (set.next())&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//set可以传回每列的值   可以根据第几列得到eg:</span></span><br><span class="line"><span class="keyword">int</span> id = set.getInt(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//可以根据列的字段值得到</span></span><br><span class="line">String name = set.getString(<span class="string">"name"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h3><p>​    包括 connection对象、statement对象、Result对象都需要关闭。<strong>注意关闭顺序，先外后内</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeAll</span><span class="params">(Connection connection, Statement statement, ResultSet set)</span></span>&#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> (set != <span class="keyword">null</span>)&#123;</span><br><span class="line">                 set.close();</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">if</span> (statement != <span class="keyword">null</span>)&#123;</span><br><span class="line">                 statement.close();</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">if</span> (connection != <span class="keyword">null</span>)&#123;</span><br><span class="line">                 connection.close();</span><br><span class="line">             &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="JDBC对数据库的增删改查操作"><a href="#JDBC对数据库的增删改查操作" class="headerlink" title="JDBC对数据库的增删改查操作"></a>JDBC对数据库的增删改查操作</h2><h3 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bean层：放实体类。</span><br><span class="line">Dao层：放对实体类的相关操作。</span><br><span class="line">util层：放工具类。</span><br></pre></td></tr></table></figure>

<h3 id="连接数据库步骤"><a href="#连接数据库步骤" class="headerlink" title="连接数据库步骤"></a>连接数据库步骤</h3><p><font color="#ff0000"><strong>思路：</strong></font></p>
<p><font color="#ff0000">## :   </font>*<em>所有步骤必须在加载JDBC的情况下，及第一步必须先执行   [3.1] *</em></p>
<p><strong>1.</strong>创建实体类（Student.class）</p>
<p><strong>2.</strong>对实体类的相关操作（StudentDao.class）</p>
<p><strong>2.1.</strong>向数据库添加数据</p>
<p>​    需要5步操作。</p>
<p>​    <strong>转到 3.2.</strong>  –&gt;  需要用到sql语句：输入Student对象的值的拼接。</p>
<p>​    对于每个创建JDBC相关对象的语句，都必须关闭。。。</p>
<p>​    <strong>转到 3.3.</strong>  –&gt;  调用closeAll( )方法。</p>
<p><strong>2.2.</strong>向数据库更新数据</p>
<p><strong>2.3.</strong>数据库删除数据</p>
<p><strong>2.4.</strong>数据库查询数据</p>
<p><strong>3.</strong>工具包（util）</p>
<p><strong>3.1.</strong>ConnectUtil工具类加载驱动程序，获取Connection的对象。</p>
<p><strong>3.2.</strong>ScannerStudentUtil工具类拼接 添加数据的sql语句。</p>
<p><strong>3.3.</strong>CloseUtil工具类关闭对象。</p>
<p><strong>4.</strong>对dao层的方法进行测试。</p>
<h3 id="功能层补充"><a href="#功能层补充" class="headerlink" title="功能层补充"></a>功能层补充</h3><h4 id="bean层"><a href="#bean层" class="headerlink" title="bean层"></a>bean层</h4><p>sudent类</p>
<h4 id="Dao层"><a href="#Dao层" class="headerlink" title="Dao层"></a>Dao层</h4><p>StudentDao类</p>
<h4 id="util层"><a href="#util层" class="headerlink" title="util层"></a>util层</h4><h5 id="ConnectUtil工具类"><a href="#ConnectUtil工具类" class="headerlink" title="ConnectUtil工具类"></a>ConnectUtil工具类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.uplooking.JDBC.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  String URL = <span class="string">"jdbc:mysql://localhost:3306/mysql_study?serverTimezone=UTC&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  String USER = <span class="string">"root"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  String PASSWORD = <span class="string">"summer"</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    加载驱动程序，驱动程序只需要加载一次，</span></span><br><span class="line"><span class="comment">    而且是在使用之前加载。所以加载驱动程序需要放到静态代码块里面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取Connection的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnect</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = DriverManager.getConnection(URL,USER,PASSWORD);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  connection;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ScannerStudentUtil工具类"><a href="#ScannerStudentUtil工具类" class="headerlink" title="ScannerStudentUtil工具类"></a>ScannerStudentUtil工具类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.uplooking.JDBC.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.uplooking.JDBC.bean.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//继承方法：子类也可以直接调用父类的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScannerStudentUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sql语句字段值获取</span></span><br><span class="line">        StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        stringBuffer.append(<span class="string">"'"</span>).append(student.getName()).append(<span class="string">"'"</span>).append(<span class="string">","</span>)</span><br><span class="line">                .append(student.getAge()).append(<span class="string">","</span>)</span><br><span class="line">                .append(<span class="string">"'"</span>).append(student.getSex()).append(<span class="string">"'"</span>);</span><br><span class="line">        <span class="keyword">return</span> stringBuffer.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="CloseUtil工具类"><a href="#CloseUtil工具类" class="headerlink" title="CloseUtil工具类"></a>CloseUtil工具类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.uplooking.JDBC.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloseUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeAll</span><span class="params">(Connection connection, Statement statement, ResultSet set)</span></span>&#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>)&#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="keyword">null</span>)&#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (set != <span class="keyword">null</span>)&#123;</span><br><span class="line">                set.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="SQL概念"><a href="#SQL概念" class="headerlink" title="SQL概念"></a>SQL概念</h2><h2 id="简单SQL注入实例"><a href="#简单SQL注入实例" class="headerlink" title="简单SQL注入实例"></a>简单SQL注入实例</h2><p><strong>数据库</strong></p>
<p><img src="C:%5CUsers%5Clixueni%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1569550356629.png" alt="1569550356629"></p>
<p><strong>查询数据库方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简单sql注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seleectSql</span><span class="params">(String name, String password)</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        Statement statement = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet set = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//1.</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = ConnectUtil.getConnect();</span><br><span class="line">            <span class="comment">//2.</span></span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            <span class="comment">//3.</span></span><br><span class="line">            String sql = <span class="string">"select * from user where name = '"</span> + name + <span class="string">"' or 'a' = 'a' "</span> + <span class="string">"and password = '"</span> + password + <span class="string">"' or 'a' = 'a'"</span>;</span><br><span class="line">            <span class="comment">//4.</span></span><br><span class="line">            set = statement.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (set.next())&#123;</span><br><span class="line">                System.out.println(<span class="string">"数据库查询成功"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            CloseUtil.closeAll(connection,statement,set);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSeleectSql</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"请输入用户名："</span>);</span><br><span class="line">        String name = scanner.next();</span><br><span class="line">        System.out.println(<span class="string">"请输入密码："</span>);</span><br><span class="line">        String password = scanner.next();</span><br><span class="line"></span><br><span class="line">        studentDao.seleectSql(name,password);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>结果</strong></p>
<p><strong>##即使不输入正确的密码也能登陆。</strong></p>
<p><img src="C:%5CUsers%5Clixueni%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1569550412051.png" alt="1569550412051"></p>
<h1 id="JDBC-调用mysql存储过程和函数"><a href="#JDBC-调用mysql存储过程和函数" class="headerlink" title="JDBC 调用mysql存储过程和函数"></a>JDBC 调用mysql存储过程和函数</h1><p><strong>目的：</strong></p>
<p>在数据库中我们可以写一些存储过程和函数，来封装一些常用的SQL语句，存储过程和函数目的是为了可重复地执行操作数据库的sql语句的集合。</p>
<p><strong>返回值上：</strong></p>
<p>(1)  存储过程的返回值，可以有多个值。<br>(2)  函数的返回值，只有一个值。</p>
<p><strong>数据访问形式：</strong></p>
<p>(1)  函数是可以嵌入在SQL中使用的，可以在SELECT等SQL语句中调用，</p>
<p>(2)  而存储过程则不行。我们可以在数据库中创建一些常用的存储过程和函数，这样我们在数据访问层直接调用即可。</p>
<p>这里记录一下使用JDBC调用存储过程和函数的方法:</p>
<h2 id="调用没有返回值的存储过程"><a href="#调用没有返回值的存储过程" class="headerlink" title="调用没有返回值的存储过程"></a>调用没有返回值的存储过程</h2><p><strong>创建一个没有返回值的存储过程:</strong></p>
<p><font color="00ff00">输入值使用in，返回值使用out表示</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sql语句</span></span><br><span class="line"><span class="comment">//关键字：in设置变量</span></span><br><span class="line"><span class="function">create procedure <span class="title">proNoReturn</span><span class="params">(in sId <span class="keyword">int</span>,in sName varchar(<span class="number">20</span>)</span>)</span></span><br><span class="line"><span class="function">begin </span></span><br><span class="line"><span class="function">insert into student <span class="title">values</span><span class="params">(sId,sName)</span></span>;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="function">call <span class="title">proNoReturn</span><span class="params">(<span class="number">4</span>,<span class="string">"lucy"</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>ProAndFuncDao中调用：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.uplooking.JDBC.ProAndFuncDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.uplooking.JDBC.util.ConnectUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.CallableStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProAndFuncDao</span> </span>&#123;</span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    CallableStatement callableStatement = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//执行无返回值的存储过程</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">proNoReturn</span><span class="params">(<span class="keyword">int</span> id,String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.连接驱动。创建Connection对象</span></span><br><span class="line">            connection = ConnectUtil.getConnect();</span><br><span class="line">            <span class="comment">//2.写预编译的sql语句</span></span><br><span class="line">            String sql = <span class="string">"&#123;call proNoReturn(?,?)&#125;"</span>;</span><br><span class="line">            <span class="comment">//3.用Connection对象创建CallableStatement对象。</span></span><br><span class="line">            callableStatement = connection.prepareCall(sql);</span><br><span class="line">            <span class="comment">//4.向预编译的sql语句中设置值</span></span><br><span class="line">            callableStatement.setInt(<span class="number">1</span>,id);</span><br><span class="line">            callableStatement.setString(<span class="number">2</span>,name);</span><br><span class="line">            <span class="comment">//5.执行sql语句。</span></span><br><span class="line">            <span class="keyword">int</span> temp = callableStatement.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (temp &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"通过无返回值的存储过程添加数据成功"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">proNoReturn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"请输入id字段值："</span>);</span><br><span class="line">       <span class="keyword">int</span> id = scanner.nextInt();</span><br><span class="line">       System.out.println(<span class="string">"请输入name字段值："</span>);</span><br><span class="line">       String name = scanner.next();</span><br><span class="line">       proAndFuncDao.proNoReturn(id,name);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="调用有返回值的存储过程"><a href="#调用有返回值的存储过程" class="headerlink" title="调用有返回值的存储过程"></a>调用有返回值的存储过程</h2><p><strong>创建有返回值的存储过程：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">create procedure <span class="title">proNoReturn1</span><span class="params">(in sId <span class="keyword">int</span>,in sName varchar(<span class="number">20</span>)</span>,out result <span class="title">varchar</span><span class="params">(<span class="number">20</span>)</span>)</span></span><br><span class="line"><span class="function">begin </span></span><br><span class="line"><span class="function">insert into student <span class="title">values</span><span class="params">(sId,sName)</span></span>;</span><br><span class="line">set result = <span class="string">"恭喜你，向数据库增添数据成功！"</span>;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>ProAndFuncDao中调用：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行有返回值的存储过程</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">proHasReturn</span><span class="params">(<span class="keyword">int</span> id, String name)</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        CallableStatement callableStatement = <span class="keyword">null</span>;</span><br><span class="line">        Object o = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.连接驱动。创建Connection对象</span></span><br><span class="line">            connection = ConnectUtil.getConnect();</span><br><span class="line">            <span class="comment">//2.写预编译的sql语句</span></span><br><span class="line">            String sql = <span class="string">"&#123;call proNoReturn1(?,?,?)&#125;"</span>;</span><br><span class="line">            <span class="comment">//3.用Connection对象创建CallableStatement对象。</span></span><br><span class="line">            callableStatement = connection.prepareCall(sql);</span><br><span class="line">            <span class="comment">//4.向预编译的sql语句中设置值</span></span><br><span class="line">            callableStatement.setInt(<span class="number">1</span>,id);</span><br><span class="line">            callableStatement.setString(<span class="number">2</span>,name);</span><br><span class="line">            <span class="comment">//4.1注册输出</span></span><br><span class="line">            callableStatement.registerOutParameter(<span class="number">3</span>, Types.VARCHAR);</span><br><span class="line">            <span class="comment">//5.执行sql语句。</span></span><br><span class="line">            <span class="keyword">int</span> temp = callableStatement.executeUpdate();</span><br><span class="line">            <span class="comment">//6.得到返回值</span></span><br><span class="line">            o = callableStatement.getObject(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">if</span> (temp &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(o);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            CloseUtil.closeAll(connection,callableStatement,<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">proHasReturn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"请输入id字段值："</span>);</span><br><span class="line">        <span class="keyword">int</span> id = scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">"请输入name字段值："</span>);</span><br><span class="line">        String name = scanner.next();</span><br><span class="line">        Object o = proAndFuncDao.proHasReturn(id,name);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="调用自定义函数"><a href="#调用自定义函数" class="headerlink" title="调用自定义函数"></a>调用自定义函数</h2><p><strong>SQL语句：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">create <span class="title">fun_avg_dept</span><span class="params">(vdeptno <span class="keyword">int</span>)</span> returns <span class="keyword">double</span></span></span><br><span class="line"><span class="function">begin</span></span><br><span class="line"><span class="function">declare r <span class="keyword">double</span></span>;</span><br><span class="line"><span class="function">select <span class="title">avg</span><span class="params">(sal)</span> into r from emp where</span></span><br><span class="line"><span class="function">deptno</span>=vdeptno;</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>Dao中调用：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 带返回值的自定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Connection conn = ConnUtil.getConn();</span><br><span class="line">        <span class="comment">//函数可以嵌入到Sql中</span></span><br><span class="line">        String sql = <span class="string">"select fun_avg_dept(?)"</span>;</span><br><span class="line">        <span class="comment">//调用方式还是和使用ps调用普通SQL一样</span></span><br><span class="line">        PreparedStatement ps =</span><br><span class="line">conn.prepareStatement(sql);</span><br><span class="line">        ps.setObject(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        ResultSet rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">            System.out.println(rs.getObject(<span class="number">1</span>));</span><br><span class="line">        &#125;     rs.close();</span><br><span class="line">        ps.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h1><h2 id="c3p0-config"><a href="#c3p0-config" class="headerlink" title="c3p0-config"></a>c3p0-config</h2><p>需要下载三个jar包：</p>
<p>（1）mysql-connector-java-版本号.jar</p>
<p>（2）mchange-commons-java-版本号.jar   //jdbc驱动jar包</p>
<p>（3）c3p0-版本号.jar                                      //c3p0的一个jar包</p>
<h3 id="相关定义-1"><a href="#相关定义-1" class="headerlink" title="相关定义"></a>相关定义</h3><p>C3P0是一个开源的JDBC<a href="https://baike.baidu.com/item/连接池/1699713" target="_blank" rel="noopener">连接池</a>，它实现了数据源和JNDI绑定，支持JDBC3规范和JDBC2的标准扩展。目前使用它的<a href="https://baike.baidu.com/item/开源项目/3406069" target="_blank" rel="noopener">开源项目</a>有Hibernate、Spring等。</p>
<h3 id="c3p0与dbcp区别"><a href="#c3p0与dbcp区别" class="headerlink" title="c3p0与dbcp区别"></a>c3p0与dbcp区别</h3><p>dbcp没有自动回收空闲连接的功能</p>
<p>c3p0有自动回收空闲连接功能</p>
<h3 id="程序实现"><a href="#程序实现" class="headerlink" title="程序实现"></a>程序实现</h3><h4 id="两种配置方式实现"><a href="#两种配置方式实现" class="headerlink" title="两种配置方式实现"></a>两种配置方式实现</h4><h5 id="C3P0第一种配置方式：不使用配置文件"><a href="#C3P0第一种配置方式：不使用配置文件" class="headerlink" title="C3P0第一种配置方式：不使用配置文件:"></a>C3P0第一种配置方式：不使用配置文件:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      c3p0第一种配置方式不用配置文件</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnectionByNoConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Connection connection = <span class="keyword">null</span>;</span><br><span class="line">      <span class="comment">//第一步获取ComboPooledDataSource对象</span></span><br><span class="line">      ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">      <span class="comment">//第二步通过ComboPooledDataSource对象对驱动层设置属性信息。</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">//2.1设置Driver属性</span></span><br><span class="line">          comboPooledDataSource.setDriverClass(DRIVER);</span><br><span class="line">          <span class="comment">//2.2设置url属性</span></span><br><span class="line">          comboPooledDataSource.setJdbcUrl(URL);</span><br><span class="line">          <span class="comment">//2.3设置user</span></span><br><span class="line">          comboPooledDataSource.setUser(USER);</span><br><span class="line">          <span class="comment">//2.4设置password</span></span><br><span class="line">          comboPooledDataSource.setPassword(PASSWORD);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//2.5设置初始连接池数量</span></span><br><span class="line">          comboPooledDataSource.setInitialPoolSize(<span class="number">10</span>);</span><br><span class="line">          <span class="comment">//2.6设置最常空闲时间</span></span><br><span class="line">          comboPooledDataSource.setMaxIdleTime(<span class="number">1</span>);</span><br><span class="line">          <span class="comment">//2.7设置连接池最大数量</span></span><br><span class="line">          comboPooledDataSource.setMaxPoolSize(<span class="number">20</span>);</span><br><span class="line">          <span class="comment">//2.8设置连接池最小数量</span></span><br><span class="line">          comboPooledDataSource.setMinPoolSize(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//第三步通过ComboPooledDataSource对象得到Connection对象</span></span><br><span class="line">          connection = comboPooledDataSource.getConnection();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (PropertyVetoException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          comboPooledDataSource.setDriverClass(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (PropertyVetoException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> connection;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h5 id="C3P0第二种配置方式：使用配置文件："><a href="#C3P0第二种配置方式：使用配置文件：" class="headerlink" title="C3P0第二种配置方式：使用配置文件："></a>C3P0第二种配置方式：使用配置文件：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    c3p0第二种配置方式不用配置文件</span></span><br><span class="line"><span class="comment">    修改JDBC连接配置的时候不需要修改Java文件，直接修改c3p0-config配置文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnectionByConfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//第一步获取ComboPooledDataSource对象      直接通过参数传递xml文件</span></span><br><span class="line">            ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"myApp"</span>);</span><br><span class="line">            <span class="comment">//第二步直接通过ComboPooledDataSource对象获取Connection对象</span></span><br><span class="line">            connection = comboPooledDataSource.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="配置文件："><a href="#配置文件：" class="headerlink" title="配置文件："></a><font color="#ff0000">配置文件：</font></h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">  &lt;<span class="keyword">default</span>-config&gt;</span><br><span class="line">	&lt;property  name="driverClass"&gt;com.mysql.cj.jdbc.Driver&lt;/property &gt;</span><br><span class="line">    &lt;!--转义字符&amp;amp;--&gt;</span><br><span class="line">	&lt;property name=<span class="string">"jdbcUrl"</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/employee?serverTimezone=UTC&amp;amp;characterEncoding=utf-8&lt;/property &gt;</span></span><br><span class="line">	&lt;property name="user"&gt;root&lt;/property&gt;</span><br><span class="line">	&lt;property name="password"&gt;summer&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 连接池配置 --&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property name="acquireIncrement"&gt;5&lt;/property&gt;</span><br><span class="line">	&lt;property name="initialPoolSize"&gt;5&lt;/property&gt;</span><br><span class="line">    &lt;property name="maxIdleTime"&gt;3&lt;/property&gt;</span><br><span class="line">    &lt;property name="maxPoolSize"&gt;4&lt;/property&gt;</span><br><span class="line">    &lt;property name="minPoolSize"&gt;2&lt;/property&gt;</span><br><span class="line">    &lt;/default-config&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 命名配置 --&gt;</span><br><span class="line">    &lt;!--如果读取了<span class="string">"myApp"</span>的配置那么就不会读取默认配置--&gt;</span><br><span class="line">    &lt;named-config name=<span class="string">"myApp"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name="user"&gt;root&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name="password"&gt;summer&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name="driverClass"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">    &lt;property name=<span class="string">"jdbcUrl"</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/employee?serverTimezone=UTC&amp;amp;characterEncoding=utf-8&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;property name="initialPoolSize"&gt;10&lt;/property&gt;</span><br><span class="line">    &lt;property name="maxIdleTime"&gt;10&lt;/property&gt;</span><br><span class="line">    &lt;property name="maxPoolSize"&gt;20&lt;/property&gt;</span><br><span class="line">    &lt;property name="minPoolSize"&gt;10&lt;/property&gt;</span><br><span class="line">    &lt;/named-config&gt;</span><br><span class="line">  </span><br><span class="line"> &lt;/c3p0-config&gt;</span><br></pre></td></tr></table></figure>

<h2 id="DBCP"><a href="#DBCP" class="headerlink" title="DBCP"></a>DBCP</h2><p>需要下载个jar数据包：</p>
<p>（1）mysql-connector-java-版本.jar</p>
<p>（2）commons-dbcp-版本1.4.jar</p>
<p>（3）commons-pool-版本.jar</p>
<h3 id="相关定义-2"><a href="#相关定义-2" class="headerlink" title="相关定义"></a>相关定义</h3><p>DBCP(DataBase connection pool)一般指数据库连接池。</p>
<p>数据库连接池负责分配、管理和释放数据库连接，它允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个；释放空闲时间超过最大空闲时间的数据库连接来避免因为没有释放数据库连接而引起的数据库连接遗漏。这项技术能明显提高对数据库操作的性能。</p>
<p>DBCP是一个依赖Jakartacommons-pool<a href="https://baike.baidu.com/item/对象池" target="_blank" rel="noopener">对象池</a>机制的数据库连接池。DBCP可以直接的在应用程序中使用。</p>
<h3 id="程序实现-1"><a href="#程序实现-1" class="headerlink" title="程序实现"></a>程序实现</h3><h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><p>创建一个(dbcp.properties)文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/employee?serverTimezone=UTC&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="comment">//Time Out报错解决:serverTimezone=UTC&amp;characterEncoding=utf-8</span></span><br><span class="line">username=root</span><br><span class="line">password=summer</span><br></pre></td></tr></table></figure>

<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><p><strong>第一步</strong>：创建DataSource的对象（DataSource是一个接口），使用BasicDataSourceFactory类里面的<font color="#00ff00">createDataSource()</font>创建一个DataSource的一个对象</p>
<p><strong>第二步</strong>：调用createDataSource（）方法的时候需要传一个Properties的一个对象</p>
<p><strong>第三步</strong>：需要创建一个Properties的对象</p>
<p>Properties prop = new Properties（）；</p>
<p>pop.load(in)</p>
<p>load这个方法需要传一个IputStream或者reader的对象。</p>
<p>需要创建一个IputStream或者是reader对象去读取dbcp的属性配置文件</p>
<p><strong>第四步</strong>：通过DataSource的对象调用getConnection()  去获取一个连接的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnectionByDbcp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        InputStream inputStream = <span class="keyword">null</span>;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream = <span class="keyword">new</span> FileInputStream(<span class="string">"D:\\IntelliJ\\WorkSpace\\DBCP\\src\\com\\uplooking\\DBCP\\util\\dbcp.properties"</span>);</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            DataSource basicDataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">            connection = basicDataSource.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                inputStream.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Durid"><a href="#Durid" class="headerlink" title="Durid"></a>Durid</h2><p>需要下载两个jar包：</p>
<p>（1）mysql-connector-java版本号.jar</p>
<p>（2）druid-版本号.jar                              //druid的jar包</p>
<h3 id="相关定义-3"><a href="#相关定义-3" class="headerlink" title="相关定义"></a>相关定义</h3><p>DRUID是阿里巴巴开源平台上一个数据库连接池实现，它结合了C3P0、DBCP、PROXOOL等DB池的优点，同时加入了日志监控，可以很好的监控DB池连接和SQL的执行情况，可以说是针对监控而生的DB连接池，据说是目前最好的连接池。</p>
<h3 id="程序实现-2"><a href="#程序实现-2" class="headerlink" title="程序实现"></a>程序实现</h3><h4 id="两种配置方式实现-1"><a href="#两种配置方式实现-1" class="headerlink" title="两种配置方式实现"></a>两种配置方式实现</h4><h5 id="第一种不使用配置文件，set方法添加"><a href="#第一种不使用配置文件，set方法添加" class="headerlink" title="第一种不使用配置文件，set方法添加"></a>第一种不使用配置文件，set方法添加</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    第一种方式：通过set方法设置属性值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnectionByDruidSet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DruidDataSource druidDataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">            druidDataSource.setUrl(<span class="string">"jdbc:mysql://localhost:3306/employee?serverTimezone=UTC&amp;characterEncoding=utf-8"</span>);</span><br><span class="line">            druidDataSource.setUsername(<span class="string">"root"</span>);</span><br><span class="line">            druidDataSource.setPassword(<span class="string">"summer"</span>);</span><br><span class="line">            connection = druidDataSource.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="第二种使用配置文件"><a href="#第二种使用配置文件" class="headerlink" title="第二种使用配置文件"></a>第二种使用配置文件</h5><h6 id="配置文件：-1"><a href="#配置文件：-1" class="headerlink" title="配置文件："></a>配置文件：</h6><p>druid.properties</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/employee?serverTimezone=UTC&amp;characterEncoding=utf-8</span></span><br><span class="line">username=root</span><br><span class="line">password=summer</span><br><span class="line">#注意serverTimezone的zone的第一个字母要小写</span><br><span class="line">#注释要用#表示</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnectionByDruid</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String url = <span class="string">"D:\\IntelliJ\\WorkSpace\\Druid\\src\\com\\uplooking\\Druid\\util\\druid.properties"</span>;</span><br><span class="line">            InputStream inputStream = <span class="keyword">new</span> FileInputStream(url);</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">            connection = dataSource.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="C3P0-DBCP-Druid三中连接池详细配置信息对比"><a href="#C3P0-DBCP-Druid三中连接池详细配置信息对比" class="headerlink" title="C3P0 DBCP Druid三中连接池详细配置信息对比"></a>C3P0 DBCP Druid三中连接池详细配置信息对比</h2><table>
<thead>
<tr>
<th>c3p0</th>
<th>c3p0是一个开放源代码的JDBC连接池，它在lib目录中与Hibernate一起发布,包括了实现jdbc3和jdbc2扩展规范说明的Connection和Statement池的DataSources 对象。</th>
</tr>
</thead>
<tbody><tr>
<td>DBCP</td>
<td>DBCP是一个依赖Jakarta  commons-pool对象池机制的数据库连接池.DBCP可以直接的在应用程序中使用，Tomcat的数据源使用的就是DBCP。</td>
</tr>
<tr>
<td>druid</td>
<td>阿里出品，淘宝和支付宝专用数据库连接池，但它不仅仅是一个数据库连接池，它还包含一个ProxyDriver，一系列内置的JDBC组件库，一个SQL Parser。支持所有JDBC兼容的数据库，包括Oracle、MySql、Derby、Postgresql、SQL Server、H2等等。Druid针对Oracle和MySql做了特别优化，比如Oracle的PS Cache内存占用优化，MySql的ping检测优化。Druid提供了MySql、Oracle、Postgresql、SQL-92的SQL的完整支持，这  是一个手写的高性能SQL Parser，支持Visitor模式，使得分析SQL的抽象语法树很方便。简单SQL语句用时10微秒以内，复杂SQL用时30微秒。通过Druid提供的SQL Parser可以在JDBC层拦截SQL做相应处理，比如说分库分表、审计等。Druid防御SQL注入攻击的WallFilter就是通过Druid的SQL Parser分析语义实现的。</td>
</tr>
</tbody></table>
<h3 id="配置对比"><a href="#配置对比" class="headerlink" title="配置对比"></a>配置对比</h3><p>连接池的配置大体可以分为：基本配置、关键配置、性能配置等主要配置</p>
<h4 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h4><p>连接池进行数据库连接的四个必须配置</p>
<table>
<thead>
<tr>
<th>基本配置</th>
<th>DBCP</th>
<th>C3P0</th>
<th>druid</th>
</tr>
</thead>
<tbody><tr>
<td>用户名</td>
<td>username</td>
<td>user</td>
<td>username</td>
</tr>
<tr>
<td>密码</td>
<td>password</td>
<td>password</td>
<td>paasword</td>
</tr>
<tr>
<td>URL</td>
<td>url</td>
<td>jdbcUrl</td>
<td>jdbcUrl</td>
</tr>
<tr>
<td>驱动类名</td>
<td>driverClassName</td>
<td>driverClass</td>
<td>dirverClass</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p> 注：在Druid连接池配置中，driverClass可配可不配，不配置的话可以根据url自动识别数据库类  型，然后选择相应的driverClass。</p>
<h4 id="关键配置"><a href="#关键配置" class="headerlink" title="关键配置"></a>关键配置</h4><p>为了发挥数据库连接池的作用。</p>
<table>
<thead>
<tr>
<th>关键配置</th>
<th>DBCP</th>
<th>C3P0</th>
<th>Druid</th>
</tr>
</thead>
<tbody><tr>
<td>最小连接数</td>
<td>minIdle(0)</td>
<td>miniPoolSize（3）</td>
<td>minldle(0)</td>
</tr>
<tr>
<td>初始连接数</td>
<td>innitialSize(0)</td>
<td>initialPoolSize(3)</td>
<td>initialSize</td>
</tr>
<tr>
<td>最大连接数</td>
<td>maxTotal(8)</td>
<td>maxPoolSize(15)</td>
<td>maxActive(8)</td>
</tr>
<tr>
<td>最大等待时间</td>
<td>maxWaitnillos(毫秒)</td>
<td>maxIdleTime(0秒)</td>
<td>maxWait(毫秒）</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>最小连接数</td>
<td>是数据库一直保持的数据库连接数</td>
</tr>
<tr>
<td>初始化连接数</td>
<td>连接池启动时创建的初始化数据库连接数量</td>
</tr>
<tr>
<td>最大连接数</td>
<td>连接池能申请的最大连接数，请求超出此数时，后面的数据库连接请求被加入 等待队列中</td>
</tr>
<tr>
<td>最大等待时间</td>
<td>当没有可用连接时，连接池等待连接被归还的最大时间，超过时间则抛出异 常，可设置为0或负数，无限等待。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>在DBCP连接池的配置中，还有一个maxldle的属性，表示最大空闲连接数，超过的空闲连接将被释放。对应的该属性在Druid中不再使用，配置了也不会有效果；而c3p0就没有对应的属性。</th>
</tr>
</thead>
<tbody><tr>
<td>数据库连接池在初始化的时候回创建initialSize个连接，当有数据库操作时，会从池中取出一个连接</td>
</tr>
</tbody></table>
<h4 id="性能配置"><a href="#性能配置" class="headerlink" title="性能配置"></a>性能配置</h4><p>预缓存设置、连接有效性检测设置、连接超时关闭设置</p>
<h4 id="预缓存设置"><a href="#预缓存设置" class="headerlink" title="预缓存设置"></a>预缓存设置</h4><p>用于控制PreparedStatement数量，提升数据库性能。</p>
<table>
<thead>
<tr>
<th></th>
<th>DBCP</th>
<th>C3P0</th>
<th>Druid</th>
</tr>
</thead>
<tbody><tr>
<td>开启缓存功能</td>
<td>poolPreparedStatements</td>
<td>maxStatements</td>
<td>poolPreparedStatements</td>
</tr>
<tr>
<td>单个连接拥有的最大缓存数</td>
<td>maxOpenPreparedStatements</td>
<td>maxStatementsPerConnection</td>
<td>maxOpenPreparedStatements</td>
</tr>
</tbody></table>
<h4 id="连接有效性检测设置"><a href="#连接有效性检测设置" class="headerlink" title="连接有效性检测设置"></a>连接有效性检测设置</h4><p>连接池内部有机制判断，如果当前的总连接数少于minildle，则会建立新的空闲连接，以保证连接数达到minildle。如果当前连接池中某个连接处于空闲，则被物理性的关闭掉。有些数据库连接的时候有超时的限制（mysql连接8小时后断开），或者由于网络中断等原因，连接池的连接会出现失效，这时候，设置一个testWhileldle参数为true，可以保证连接池中，定时检测连接可用性，不可用的连接会被抛出或者重建，保证池中connection可用。</p>
<table>
<thead>
<tr>
<th></th>
<th>DBCP</th>
<th>C3P0</th>
<th>Druid</th>
</tr>
</thead>
<tbody><tr>
<td>申请连接检测</td>
<td>testOnBorrow</td>
<td>testConnectionOnCheckin</td>
<td>testOnBorrow</td>
</tr>
<tr>
<td>是否超时检测</td>
<td>testWhileldle</td>
<td></td>
<td>testWhileldle</td>
</tr>
<tr>
<td>空</td>
<td>timeBetweenEvictionRuns Millis</td>
<td>idleConnectionTestPeriod</td>
<td>timeBetweenEvictionRunsMillis</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>闲时间</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>校验sql 语句</td>
<td>validationQuery</td>
<td>preferredTestQuery</td>
<td>validationQuery</td>
</tr>
<tr>
<td>归还连接检测</td>
<td>testOnReturn</td>
<td>testConnectionOnCheckout</td>
<td>testOnReturn</td>
</tr>
</tbody></table>
<h4 id="超时连接关闭设置"><a href="#超时连接关闭设置" class="headerlink" title="超时连接关闭设置"></a>超时连接关闭设置</h4><p>用来检测当前使用的连接是否发生泄漏，所以在代码内部就假定如果一个连接建立连接时间很长，则认定为泄漏，继而强制关闭。</p>
<table>
<thead>
<tr>
<th></th>
<th>DBCP</th>
<th>c3p0</th>
<th>Druid</th>
</tr>
</thead>
<tbody><tr>
<td>是否超时关闭连接</td>
<td>removeAbandoned</td>
<td>breakAfterAcquireFailure</td>
<td>removeAbandoned</td>
</tr>
<tr>
<td>超时时间</td>
<td>removeAbandonedTimeout</td>
<td>checkoutTimeout</td>
<td>removeAbandonedTimeout</td>
</tr>
<tr>
<td>是否记录日志</td>
<td>logAbandoned</td>
<td></td>
<td>logAbandoned</td>
</tr>
</tbody></table>
<h3 id="DBCP配置详解"><a href="#DBCP配置详解" class="headerlink" title="DBCP配置详解"></a>DBCP配置详解</h3><table>
<thead>
<tr>
<th>属性(Parameter)</th>
<th>默认值(Default)</th>
<th>描述(Description)</th>
</tr>
</thead>
<tbody><tr>
<td>username</td>
<td></td>
<td>传递给JDBC驱动的用于建立连接的用户名</td>
</tr>
<tr>
<td>password</td>
<td></td>
<td>传递给JDBC驱动的用于建立连接的密码</td>
</tr>
<tr>
<td>url</td>
<td></td>
<td>传递给JDBC驱动的用于建立连接的URL</td>
</tr>
<tr>
<td>driverClassName</td>
<td></td>
<td>使用的JDBC驱动的完整有效的java 类名</td>
</tr>
<tr>
<td>defaultAutoCommit</td>
<td>driver default</td>
<td>连接池创建的连接的默认的auto-commit状态, 没有设置则不会自动提交</td>
</tr>
<tr>
<td>initialSize</td>
<td>0</td>
<td>初始化连接:连接池启动时创建的初始化连接数量</td>
</tr>
<tr>
<td>maxTotal</td>
<td>8</td>
<td>最大活动连接:连接池在同一时间能够分配的最大活动连接的数量, 如果设置为非正数则表示不限制</td>
</tr>
<tr>
<td>maxIdle</td>
<td>8</td>
<td>最大空闲连接:连接池中容许保持空闲状态的最大连接数量,超过的空闲连接将被释放,如果设置为负数表示不限制</td>
</tr>
<tr>
<td>minIdle</td>
<td>0</td>
<td>最小空闲连接:连接池中容许保持空闲状态的最小连接数量,负数表示没有现在</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>注意：如果在某些负载比较大的系统中将maxIdel设置过小时，很可能会出现连接关闭的同时新连接马上打开   的情况.这是由于关闭连接的线程比打开的快导致的.所以，对于这种系统中,maxIdle的设定值是不同的但是  通常首选默认值</p>
<p><strong>C3P0</strong>配置详解</p>
<table>
<thead>
<tr>
<th>属性(Parameter)</th>
<th>默认值(Default)</th>
<th>描述(Description)</th>
</tr>
</thead>
<tbody><tr>
<td>user</td>
<td></td>
<td>同DBCP中的username属性</td>
</tr>
<tr>
<td>password</td>
<td></td>
<td>同DBCP中的password属性</td>
</tr>
<tr>
<td>jdbcUrl</td>
<td></td>
<td>同DBCP中的jdbcUrl属性</td>
</tr>
<tr>
<td>driverClass</td>
<td></td>
<td>同DBCP中的driverClass属性</td>
</tr>
<tr>
<td>autoCommitOnClose</td>
<td>FALSE</td>
<td>默认值false表示回滚任何未提交的任务, 设置为true则全部提交,而不是在关闭连接之前回滚</td>
</tr>
<tr>
<td>initialPoolSize</td>
<td>3</td>
<td>初始化连接:连接池启动时创建的初始化连接数量</td>
</tr>
<tr>
<td>maxPoolSize</td>
<td>15</td>
<td>连接池中保留的最大连接数</td>
</tr>
<tr>
<td>minPoolSize</td>
<td>3</td>
<td>连接池中保留的最小连接数</td>
</tr>
<tr>
<td>maxIdleTime</td>
<td>0</td>
<td>最大等待时间:当没有可用连接时,连接池等待连接被归还的最大时间(以秒计数),超过时间则抛出异常,如果设置为0表示无限等待</td>
</tr>
<tr>
<td>preferredTestQuery</td>
<td>null</td>
<td>定义所有连接测试都执行的测试语句。在使用连接测试的情况下这个一显著提高测试速度。注意：测试的表必须在初始数据源的时候就存在</td>
</tr>
<tr>
<td>testConnectionOn- Checkin</td>
<td>FALSE</td>
<td>如果设为true那么在取得连接的同时将校验连接的有效性</td>
</tr>
<tr>
<td>testConnectionOn- Checkout</td>
<td>FALSE</td>
<td>如果设为true那么在每个connection提交的时候都将校验其有效性,但是要确保配置的preferredTestQuery的有效性</td>
</tr>
<tr>
<td>idleConnectionTest- Period</td>
<td>0</td>
<td>如果设置大于0,表示过了多少秒检查一次空闲连接,结合testConnectionOnCheckin 以及testConnectionOnCheckout使用</td>
</tr>
<tr>
<td>acquireRetryAttempts</td>
<td>30</td>
<td>定义在从数据库获取新连接失败后重复尝试的次数, 如果小于0则表示无限制的连接。</td>
</tr>
<tr>
<td>acquireRetryDelay</td>
<td>1000</td>
<td>两次连接中的间隔时间，单位毫秒。</td>
</tr>
<tr>
<td>breakAfterAcquire-Failure</td>
<td>FALSE</td>
<td>获取连接失败将会引起所有等待连接池来获取连接的线程抛出异常。但是数据源仍有效保留，并在下次调用 getConnection() 的时候继续尝试获取连接。如果为 true，那么在尝试获取连接失败后该数据源将声明已断开并永久关闭</td>
</tr>
<tr>
<td>checkoutTimeout</td>
<td>0</td>
<td>当连接池用完时客户端调用getConnection() 后等待获取新连接的时间，潮湿后将抛出SQLException，如设为0，则为无限期等待。单位毫秒。</td>
</tr>
<tr>
<td>maxStatements</td>
<td>0</td>
<td>控制数据源内加载的PreparedStatements数量</td>
</tr>
</tbody></table>
<h3 id="Druid的置详解"><a href="#Druid的置详解" class="headerlink" title="Druid的置详解"></a>Druid的置详解</h3><p>属性(Parameter)                  默认值(Default)                  描述(Description)        </p>
<table>
<thead>
<tr>
<th>username</th>
<th></th>
<th>连接数据库的用户名</th>
</tr>
</thead>
<tbody><tr>
<td>password</td>
<td></td>
<td>连接数据库的密码</td>
</tr>
<tr>
<td>jdbcUrl</td>
<td></td>
<td>同DBCP中的jdbcUrl属性</td>
</tr>
<tr>
<td>driverClassName</td>
<td>根据url自动识别</td>
<td>这一项可配可不配，如果不配置druid会根据url自动识别dbType，</td>
</tr>
<tr>
<td>initialSize</td>
<td>0</td>
<td>初始化时建立物理连接的个数。初始化发生在显示调用init方法，或 见DBCP中的initialSize属性</td>
</tr>
<tr>
<td>maxActive</td>
<td>8</td>
<td>最大连接池数量(Maximum number of Connections a pool will maintain*参见DBCP中的maxTotal属性</td>
</tr>
<tr>
<td>maxIdle</td>
<td>8</td>
<td>已经不再使用，配置了也没效果*参见DBCP中的maxIdle属性</td>
</tr>
<tr>
<td>minIdle</td>
<td></td>
<td>最小连接池数量</td>
</tr>
<tr>
<td>maxWait</td>
<td></td>
<td>获取连接时最大等待时间，单位毫秒。配置了maxWait之后，缺省启useUnfairLock属性为true使用非公平锁。</td>
</tr>
<tr>
<td>poolPreparedState- ments</td>
<td>FALSE</td>
<td>是否缓存preparedStatement，也就是PSCache。PSCache对支持</td>
</tr>
<tr>
<td>maxOpenPrepared- Statements</td>
<td>-1</td>
<td>要启用PSCache，必须配置大于0，当大于0时，poolPreparedSta 存在Oracle下PSCache占用内存过多的问题，可以把这个数值配置</td>
</tr>
<tr>
<td>testOnBorrow</td>
<td>TRUE</td>
<td>申请连接时执行validationQuery检测连接是否有效，做了这个配</td>
</tr>
<tr>
<td>testOnReturn</td>
<td>FALSE</td>
<td>归还连接时执行validationQuery检测连接是否有效，做了这个配</td>
</tr>
<tr>
<td>testWhileIdle</td>
<td>FALSE</td>
<td>建议配置为true，不影响性能，并且保证安全性。申请连接的时候检timeBetweenEvictionRunsMillis，执行validationQuery检</td>
</tr>
<tr>
<td>validationQuery</td>
<td></td>
<td>用来检测连接是否有效的sql，要求是一个查询语句。如果validatitestWhileIdle都不会其作用。在mysql中通常为select ‘x’，</td>
</tr>
<tr>
<td>timeBetweenEviction- RunsMillis</td>
<td></td>
<td>1) Destroy线程会检测连接的间隔时间2) testWhileIdle的判断依据</td>
</tr>
<tr>
<td>minEvictableIdle- TimeMillis</td>
<td></td>
<td>Destory线程中如果检测到当前连接的最后活跃时间和当前时间的差 接。</td>
</tr>
<tr>
<td>removeAbandoned</td>
<td></td>
<td>对于建立时间超过removeAbandonedTimeout的连接强制关闭</td>
</tr>
<tr>
<td>removeAbandoned-Timeout</td>
<td></td>
<td>指定连接建立多长时间就需要被强制关闭</td>
</tr>
<tr>
<td>logAbandoned</td>
<td>FALSE</td>
<td>指定发生removeabandoned的时候，是否记录当前线程的堆栈信息</td>
</tr>
<tr>
<td>filters</td>
<td></td>
<td>属性类型是字符串，通过别名的方式配置扩展插件，常用的插件有：filter:stat    2）日志用的filter:log4j</td>
</tr>
</tbody></table>
<h1 id="DButil"><a href="#DButil" class="headerlink" title="DButil"></a>DButil</h1><p>需要下载三个jar包：</p>
<p>（1）mysql-connector-java-版本.jar</p>
<p>（2）commons-dbutils-版本.jar</p>
<p>（3）druid-版本.jar</p>
<h2 id="相关定义-4"><a href="#相关定义-4" class="headerlink" title="相关定义"></a>相关定义</h2><p>commons-dbutils 是 Apache 组织提供的一个开源 JDBC工具类库，它是对JDBC的简单封装，学习成本极低，并且使用dbutils能极大简化jdbc编码的工作量，同时也不会影响程序的性能。</p>
<p><strong>DBUtils学习</strong></p>
<p>1、QueryRunner 框架核心类 ，所有数据库操作都是必须通过 QueryRunner 进行的</p>
<p>2、ResultSetHandler 结果集封装接口，完成将ResultSet 结果集 封装为一个Java对象</p>
<p>3、DbUtils 工具类 提供驱动管理、事务管理、释放资源等一系列公共方法</p>
<h2 id="前提-1"><a href="#前提-1" class="headerlink" title="前提"></a>前提</h2><p><strong>核心类：</strong></p>
<p>QueryRunner  ResultSetHandler</p>
<p>QueryRunner  里面的方法</p>
<p><strong>核心方法：</strong></p>
<p>update();用来执行DML;   insert update delete  有返回值的，返回的是受影响的行数</p>
<p>insert()  添加数据  方法可以给咱们返回一个主键的值</p>
<p>query();用来执行DQL；  select</p>
<p>batch(); 用来执行批处理</p>
<p>同时执行多条添加，更新的sql语句</p>
<p>insert into 表名（字段名） values （）（）（）；</p>
<p>update 表名 set 修改的值 where id = 1；</p>
<p>update 表名 set 修改的值 where id = 2；</p>
<p>update 表名 set 修改的值 where id = 3；</p>
<p>批处理虽然说会同时执行多条sql语句，但是连接数据库只会连接一次</p>
<p>batch（）   返回的是受影响的行数</p>
<p>insertBatch ()  也是批处理，但是这个方法实现的添加数据  也会返回一个主键值，但是这个只会返回添加第一条语句主键值，这个方法返回的主键值是 批处理添加之前之前主键最大值加1</p>
<p>调用本方法之前，需要先创建对象，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">QueryRunner qr = <span class="keyword">new</span> QueryRunner(DataSource的对</span><br><span class="line">象);</span><br><span class="line"><span class="comment">//当使用的是无参的构造器时，可以不提供连接池对象，但是在接</span></span><br><span class="line">下来的调用方法是，必须为方法Connection对象。</span><br><span class="line">对于结果集的处理有以下几个结果集处理器：</span><br><span class="line">*BenaHandler：用于在处理把单行结果集封装成JavaBean对</span><br><span class="line">象。（对象时通过反射完成创建的）</span><br><span class="line">*BeanListHandler：用于把多行结果集封装成对象，并且把对象</span><br><span class="line">添加到集合中</span><br><span class="line">*MapHandler:是用来把单行结果集封装到一个Map中其中map的键</span><br><span class="line">是表中的列名称，值对应表的列值。 </span><br><span class="line">*MapListHandler:是用来对多行结果集的处理，把每行的结果封</span><br><span class="line">装成一个map，最后把结果都放到List集合种</span><br><span class="line">*ColumnHandler：本方法是用来出来单列单行或者单列多行的数</span><br><span class="line">据</span><br><span class="line">*ScalarHandler：用于处理单行单列的数据，多用于聚合函数的</span><br><span class="line">查询，但是以一个点需要注意，就是当聚合函数是涉及到数字类型</span><br><span class="line">的时候，一定要注意返回值类型的转换。有的人会选用Integer，</span><br><span class="line"><span class="keyword">long</span>等类型，这些严格来说都是不合法的，例如，<span class="keyword">long</span>类型最大只</span><br><span class="line">能容纳<span class="number">20</span>的阶乘，<span class="number">21</span>的阶乘就会报异常，所以我们要选用</span><br><span class="line">Number(这个是所有数值类型的父类)，并且对外提供的有</span><br><span class="line">Number.intValue(),和Number.LongValue(),等方法。</span><br></pre></td></tr></table></figure>

<h2 id="程序实现-3"><a href="#程序实现-3" class="headerlink" title="程序实现"></a>程序实现</h2><p>需要先获取Connection的对象</p>
<p>需要创建QueryRunner的对象，通过这个对象实现增删改查</p>
<h3 id="添加：不能返回主键值"><a href="#添加：不能返回主键值" class="headerlink" title="添加：不能返回主键值"></a>添加：不能返回主键值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加：不能返回主键值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudent</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"insert into student(name,age,sex) values(?,?,?)"</span>;</span><br><span class="line">            runner.update(ConnectionUtil.getConnection(),sql,student.getName(),student.getAge(),student.getSex());</span><br><span class="line">            System.out.println(<span class="string">"增添数据成功！"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"增添数据失败！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加：返回主键的值"><a href="#添加：返回主键的值" class="headerlink" title="添加：返回主键的值"></a>添加：返回主键的值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加：返回主键的值        ScalarHandler&lt;Number&gt;作为ResultSetHandler&lt;Number&gt;的实习类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addStudentReturn</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"insert into student(name,age,sex) values(?,?,?)"</span>;</span><br><span class="line">            Number number = runner.insert(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> ScalarHandler&lt;Number&gt;(),student.getName(),student.getAge(),student.getSex());</span><br><span class="line">            temp = number.intValue();</span><br><span class="line">            System.out.println(temp);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新:根据ID更新姓名</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateStudentNameById</span><span class="params">(<span class="keyword">int</span> id,String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"update student set name = ? where id = ?"</span>;</span><br><span class="line">            runner.update(ConnectionUtil.getConnection(),sql,name,id);</span><br><span class="line">            System.out.println(<span class="string">"数据更新成功！"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteStudentById</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"delete from student where id = ?"</span>;</span><br><span class="line">            runner.update(ConnectionUtil.getConnection(),sql,id);</span><br><span class="line">            System.out.println(<span class="string">"数据删除成功！"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="批处理batch-增删改除–但不能返回主键值"><a href="#批处理batch-增删改除–但不能返回主键值" class="headerlink" title="批处理batch(增删改除–但不能返回主键值)"></a>批处理batch(增删改除–但不能返回主键值)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批处理    batch(增删改除--但不能返回主键值) insertBatch(只能批处理添加--可以返回主键值)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudents</span><span class="params">(List&lt;Student&gt; list)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">"insert into student(name,age,sex) values(?,?,?)"</span>;</span><br><span class="line">        <span class="comment">//将需要添加的list对象转存到数组中，         因为batch需要传入object数组对象</span></span><br><span class="line">        Object[][] objects = <span class="keyword">new</span> Object[list.size()][<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//首先，将表中对象赋值给student对象；</span></span><br><span class="line">            Student student = list.get(i);</span><br><span class="line">            objects[i][<span class="number">0</span>] = student.getName();</span><br><span class="line">            objects[i][<span class="number">1</span>] = student.getAge();</span><br><span class="line">            objects[i][<span class="number">2</span>] = student.getSex();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//有返回值：为更新的表影响了几列      返回为一个数组，数组中的值分别表示，每添加一个记录影响了几列</span></span><br><span class="line">            <span class="keyword">int</span>[] i = runner.batch(ConnectionUtil.getConnection(),sql,objects);</span><br><span class="line">            <span class="comment">//走到这里说明已经添加成功了，要不就会报错。</span></span><br><span class="line">            System.out.println(<span class="string">"通过batch批处理添加数据成功！"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="批处理-insertBatch-只能批处理添加–可以返回主键值"><a href="#批处理-insertBatch-只能批处理添加–可以返回主键值" class="headerlink" title="批处理   insertBatch(只能批处理添加–可以返回主键值)"></a>批处理   insertBatch(只能批处理添加–可以返回主键值)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批处理   insertBatch(只能批处理添加--可以返回主键值)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addStudentReturnId</span><span class="params">(List&lt;Student&gt; list)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">"insert into student(name,age,sex) values(?,?,?)"</span>;</span><br><span class="line">        <span class="comment">//将需要添加的list对象转存到数组中，         因为batch需要传入object数组对象</span></span><br><span class="line">        Object[][] objects = <span class="keyword">new</span> Object[list.size()][<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//首先，将表中对象赋值给student对象；</span></span><br><span class="line">            Student student = list.get(i);</span><br><span class="line">            objects[i][<span class="number">0</span>] = student.getName();</span><br><span class="line">            objects[i][<span class="number">1</span>] = student.getAge();</span><br><span class="line">            objects[i][<span class="number">2</span>] = student.getSex();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//有返回值：为更新的表影响了几列      返回为一个数组，数组中的值分别表示，每添加一个记录影响了几列</span></span><br><span class="line">            Number number = runner.insertBatch(ConnectionUtil.getConnection(),sql, <span class="keyword">new</span> ScalarHandler&lt;Number&gt;(),objects);</span><br><span class="line">            <span class="comment">//走到这里说明已经添加成功了，要不就会报错。</span></span><br><span class="line">            System.out.println(number);</span><br><span class="line">            System.out.println(<span class="string">"通过insertBatch批处理添加数据成功！"</span>);</span><br><span class="line">            <span class="keyword">return</span> number.intValue();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询—1-放在对象中2-放在Map中。"><a href="#查询—1-放在对象中2-放在Map中。" class="headerlink" title="查询—1.放在对象中2.放在Map中。"></a>查询—1.放在对象中2.放在Map中。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//查询出来一条记录。两种放法：1.放在对象中。2.放在Map中。</span></span><br><span class="line">    <span class="comment">//1.放在对象中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">selectStudentToStudent</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select * from student where id = ?"</span>;</span><br><span class="line">            Student student = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> BeanHandler&lt;Student&gt;(Student.class),id);</span><br><span class="line">            <span class="keyword">return</span> student;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.放在Map中。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">selectStudentToMap</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select * from student where id = ?"</span>;</span><br><span class="line">            Map&lt;String,Object&gt; map = <span class="keyword">null</span>;</span><br><span class="line">            map = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> MapHandler(),id);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="遍历map的四种方式"><a href="#遍历map的四种方式" class="headerlink" title="遍历map的四种方式"></a>遍历map的四种方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectStudentToMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"请输入查询的id："</span>);</span><br><span class="line">        <span class="keyword">int</span> id = scanner.nextInt();</span><br><span class="line">        Map&lt;String,Object&gt; map = studentDao.selectStudentToMap(id);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            遍历map集合的4种方法</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//通过map的value方法实现,直接得到值</span></span><br><span class="line">        <span class="keyword">for</span> (Object o:map.values()) &#123;</span><br><span class="line">            System.out.println(o.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="number">2</span>.通过key取值</span><br><span class="line">        <span class="keyword">for</span> (String key:map.keySet()) &#123;</span><br><span class="line">            System.out.println(key +<span class="string">":"</span> + map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="number">3</span>.通过entryset</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String,Object&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() +<span class="string">":"</span> +entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4.通过迭代器</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;String,Object&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;String,Object&gt; temp = iterator.next();</span><br><span class="line">            System.out.println(temp.getKey() +<span class="string">":"</span> + temp.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询出来多条记录—1-放在对象中封装到list集合中。2-放在Map中再封装到list集合中。"><a href="#查询出来多条记录—1-放在对象中封装到list集合中。2-放在Map中再封装到list集合中。" class="headerlink" title="查询出来多条记录—1.放在对象中封装到list集合中。2.放在Map中再封装到list集合中。"></a>查询出来多条记录—1.放在对象中封装到list集合中。2.放在Map中再封装到list集合中。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询出来多条记录。两种放法：1.放在对象中封装到list集合中。2.放在Map中再封装到list集合中。</span></span><br><span class="line">    <span class="comment">//1.放在对象中封装到list集合中。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectStudentToStudentAndList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Student&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select * from student"</span>;</span><br><span class="line">            list = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> BeanListHandler&lt;Student&gt;(Student.class));</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.放在Map中再封装到list集合中。</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; selectStudentToMapAndList()&#123;</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select * from student"</span>;</span><br><span class="line">            list = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> MapListHandler());</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询—返回一个字段多条数据"><a href="#查询—返回一个字段多条数据" class="headerlink" title="查询—返回一个字段多条数据"></a>查询—返回一个字段多条数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    返回一个字段多条数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//1.每一个数据封装JavaBean里面，对象封装List</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">selectColumnStudentToStudent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select name from student"</span>;</span><br><span class="line"></span><br><span class="line">            list = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> ColumnListHandler&lt;&gt;());</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.每一个数据封装Map  map封装List List&lt;Map&lt;String,Object&gt;&gt;</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; selectColumnStudentToMap()&#123;</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select name from student"</span>;</span><br><span class="line">            list = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> MapListHandler());</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询一个字段数据—1-封装结果集数据到基本类型封装单个结果集数据到map"><a href="#查询一个字段数据—1-封装结果集数据到基本类型封装单个结果集数据到map" class="headerlink" title="查询一个字段数据—1.封装结果集数据到基本类型封装单个结果集数据到map"></a>查询一个字段数据—1.封装结果集数据到基本类型封装单个结果集数据到map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    只查询一个字段数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//1.封装结果集数据到基本类型（String/Long/Integer/Double等等），new ScalarHandler()</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">selectString</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select name from student where id = ?"</span>;</span><br><span class="line">            String name = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> ScalarHandler&lt;String&gt;(),id);</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.封装单个结果集数据到map</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">selectMap</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">"select name from student where id = ?"</span>;</span><br><span class="line">            map = runner.query(ConnectionUtil.getConnection(),sql,<span class="keyword">new</span> MapHandler(),id);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者：<a href="http://yoursite.com">Summer</a>
            <p>原文链接：<a href="http://yoursite.com/2019/10/09/数据库连接-JDBC-JDBC工具类库/">http://yoursite.com/2019/10/09/数据库连接-JDBC-JDBC工具类库/</a>
            <p>发表日期：<a href="http://yoursite.com/2019/10/09/数据库连接-JDBC-JDBC工具类库/">October 9th 2019, 2:36:49 pm</a>
            <p>更新日期：<a href="http://yoursite.com/2019/10/09/数据库连接-JDBC-JDBC工具类库/">January 1st 2020, 12:24:14 pm</a>
            <p>版权声明：本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2019/10/12/新建maven项目的配置及方式/" title= "新建maven项目的配置及方式">
                    <div class="nextTitle">新建maven项目的配置及方式</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2019/09/26/使用工具及下载等相关整理合集/" title= "使用工具及下载等相关整理合集">
                    <div class="prevTitle">使用工具及下载等相关整理合集</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

<!-- City版安装代码已完成 -->
    
    
    <!-- partial('_partial/comment/changyan') -->
    <!--PC版-->


    
    

    <!-- 评论 -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:Summerwithcode@163.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/SummerCodeSky" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="/assets/example_qr.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDBC"><span class="toc-number">1.</span> <span class="toc-text">JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#理论"><span class="toc-number">1.1.</span> <span class="toc-text">理论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相关定义"><span class="toc-number">1.1.1.</span> <span class="toc-text">相关定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四个核心体系"><span class="toc-number">1.1.2.</span> <span class="toc-text">四个核心体系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#程序实现—JDBC连接数据库"><span class="toc-number">1.2.</span> <span class="toc-text">程序实现—JDBC连接数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加载驱动程序"><span class="toc-number">1.2.1.</span> <span class="toc-text">加载驱动程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取connection的对象"><span class="toc-number">1.2.2.</span> <span class="toc-text">获取connection的对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#statement对象获取并对数据库进行操作"><span class="toc-number">1.2.3.</span> <span class="toc-text">statement对象获取并对数据库进行操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#增添数据到数据库"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">增添数据到数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更新数据库数据"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">更新数据库数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除数据库数据"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">删除数据库数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询数据库数据"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">查询数据库数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Resultset获取操作结果"><span class="toc-number">1.2.4.</span> <span class="toc-text">Resultset获取操作结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭连接"><span class="toc-number">1.2.5.</span> <span class="toc-text">关闭连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC对数据库的增删改查操作"><span class="toc-number">1.3.</span> <span class="toc-text">JDBC对数据库的增删改查操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#分层"><span class="toc-number">1.3.1.</span> <span class="toc-text">分层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#连接数据库步骤"><span class="toc-number">1.3.2.</span> <span class="toc-text">连接数据库步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#功能层补充"><span class="toc-number">1.3.3.</span> <span class="toc-text">功能层补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bean层"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">bean层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dao层"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">Dao层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#util层"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">util层</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ConnectUtil工具类"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">ConnectUtil工具类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ScannerStudentUtil工具类"><span class="toc-number">1.3.3.3.2.</span> <span class="toc-text">ScannerStudentUtil工具类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CloseUtil工具类"><span class="toc-number">1.3.3.3.3.</span> <span class="toc-text">CloseUtil工具类</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL"><span class="toc-number">2.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL概念"><span class="toc-number">2.1.</span> <span class="toc-text">SQL概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单SQL注入实例"><span class="toc-number">2.2.</span> <span class="toc-text">简单SQL注入实例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDBC-调用mysql存储过程和函数"><span class="toc-number">3.</span> <span class="toc-text">JDBC 调用mysql存储过程和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#调用没有返回值的存储过程"><span class="toc-number">3.1.</span> <span class="toc-text">调用没有返回值的存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调用有返回值的存储过程"><span class="toc-number">3.2.</span> <span class="toc-text">调用有返回值的存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调用自定义函数"><span class="toc-number">3.3.</span> <span class="toc-text">调用自定义函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库连接池"><span class="toc-number">4.</span> <span class="toc-text">数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#c3p0-config"><span class="toc-number">4.1.</span> <span class="toc-text">c3p0-config</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相关定义-1"><span class="toc-number">4.1.1.</span> <span class="toc-text">相关定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c3p0与dbcp区别"><span class="toc-number">4.1.2.</span> <span class="toc-text">c3p0与dbcp区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#程序实现"><span class="toc-number">4.1.3.</span> <span class="toc-text">程序实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#两种配置方式实现"><span class="toc-number">4.1.3.1.</span> <span class="toc-text">两种配置方式实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#C3P0第一种配置方式：不使用配置文件"><span class="toc-number">4.1.3.1.1.</span> <span class="toc-text">C3P0第一种配置方式：不使用配置文件:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C3P0第二种配置方式：使用配置文件："><span class="toc-number">4.1.3.1.2.</span> <span class="toc-text">C3P0第二种配置方式：使用配置文件：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#配置文件："><span class="toc-number">4.1.3.1.2.1.</span> <span class="toc-text">配置文件：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DBCP"><span class="toc-number">4.2.</span> <span class="toc-text">DBCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相关定义-2"><span class="toc-number">4.2.1.</span> <span class="toc-text">相关定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#程序实现-1"><span class="toc-number">4.2.2.</span> <span class="toc-text">程序实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#前提"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">前提</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Durid"><span class="toc-number">4.3.</span> <span class="toc-text">Durid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相关定义-3"><span class="toc-number">4.3.1.</span> <span class="toc-text">相关定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#程序实现-2"><span class="toc-number">4.3.2.</span> <span class="toc-text">程序实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#两种配置方式实现-1"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">两种配置方式实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#第一种不使用配置文件，set方法添加"><span class="toc-number">4.3.2.1.1.</span> <span class="toc-text">第一种不使用配置文件，set方法添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#第二种使用配置文件"><span class="toc-number">4.3.2.1.2.</span> <span class="toc-text">第二种使用配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#配置文件：-1"><span class="toc-number">4.3.2.1.2.1.</span> <span class="toc-text">配置文件：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C3P0-DBCP-Druid三中连接池详细配置信息对比"><span class="toc-number">4.4.</span> <span class="toc-text">C3P0 DBCP Druid三中连接池详细配置信息对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置对比"><span class="toc-number">4.4.1.</span> <span class="toc-text">配置对比</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本配置"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">基本配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关键配置"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">关键配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#性能配置"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">性能配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#预缓存设置"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">预缓存设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#连接有效性检测设置"><span class="toc-number">4.4.1.5.</span> <span class="toc-text">连接有效性检测设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#超时连接关闭设置"><span class="toc-number">4.4.1.6.</span> <span class="toc-text">超时连接关闭设置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DBCP配置详解"><span class="toc-number">4.4.2.</span> <span class="toc-text">DBCP配置详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Druid的置详解"><span class="toc-number">4.4.3.</span> <span class="toc-text">Druid的置详解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DButil"><span class="toc-number">5.</span> <span class="toc-text">DButil</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#相关定义-4"><span class="toc-number">5.1.</span> <span class="toc-text">相关定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前提-1"><span class="toc-number">5.2.</span> <span class="toc-text">前提</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#程序实现-3"><span class="toc-number">5.3.</span> <span class="toc-text">程序实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#添加：不能返回主键值"><span class="toc-number">5.3.1.</span> <span class="toc-text">添加：不能返回主键值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加：返回主键的值"><span class="toc-number">5.3.2.</span> <span class="toc-text">添加：返回主键的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新"><span class="toc-number">5.3.3.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除"><span class="toc-number">5.3.4.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#批处理batch-增删改除–但不能返回主键值"><span class="toc-number">5.3.5.</span> <span class="toc-text">批处理batch(增删改除–但不能返回主键值)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#批处理-insertBatch-只能批处理添加–可以返回主键值"><span class="toc-number">5.3.6.</span> <span class="toc-text">批处理   insertBatch(只能批处理添加–可以返回主键值)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询—1-放在对象中2-放在Map中。"><span class="toc-number">5.3.7.</span> <span class="toc-text">查询—1.放在对象中2.放在Map中。</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#遍历map的四种方式"><span class="toc-number">5.3.7.1.</span> <span class="toc-text">遍历map的四种方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询出来多条记录—1-放在对象中封装到list集合中。2-放在Map中再封装到list集合中。"><span class="toc-number">5.3.8.</span> <span class="toc-text">查询出来多条记录—1.放在对象中封装到list集合中。2.放在Map中再封装到list集合中。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询—返回一个字段多条数据"><span class="toc-number">5.3.9.</span> <span class="toc-text">查询—返回一个字段多条数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询一个字段数据—1-封装结果集数据到基本类型封装单个结果集数据到map"><span class="toc-number">5.3.10.</span> <span class="toc-text">查询一个字段数据—1.封装结果集数据到基本类型封装单个结果集数据到map</span></a></li></ol></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 34
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/09</span><a class="archive-post-title" href= "/2019/12/09/小程序的flex布局/" >小程序的flex布局</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/03</span><a class="archive-post-title" href= "/2019/12/03/面试复习-MySql数据库/" >面试复习-MySql数据库</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/mybatis-2动态SQL实现/" >mybatis-2动态SQL实现</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/mybatis-1对数据库事务操作/" >mybatis-1初学</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/spring-6jdbc完成数据库事务操作/" >spring-6jdbc完成数据库事务操作</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/spring-5AOP相关and模拟切面/" >spring-5AOP相关and模拟切面</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/spring-4自动装配模式and与数据库连接/" >spring-4自动装配模式and与数据库连接</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/spring-3其他引用类型的注入/" >spring-3其他引用类型的注入</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2019/11/28/spring-2核心技术/" >spring-2核心技术</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/27</span><a class="archive-post-title" href= "/2019/11/27/打印日志Logging/" >打印日志Logging</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/25</span><a class="archive-post-title" href= "/2019/11/25/spring-1框架入门了解/" >spring框架1-入门了解</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/25</span><a class="archive-post-title" href= "/2019/11/25/XML解析/" >XML解析</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/22</span><a class="archive-post-title" href= "/2019/11/22/java注解/" >java注解</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/21</span><a class="archive-post-title" href= "/2019/11/21/java反射机制/" >java反射机制</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/18</span><a class="archive-post-title" href= "/2019/11/18/框架前提/" >框架前提</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/07</span><a class="archive-post-title" href= "/2019/11/07/java-web中jsp和servlet编码配置（pageEncoding-charset、request-response）及中文乱码问题/" >java web中jsp和servlet编码配置（pageEncoding&charset、request&response）及中文乱码问题</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/29</span><a class="archive-post-title" href= "/2019/10/29/servlet/" >servlet</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/28</span><a class="archive-post-title" href= "/2019/10/28/Jstl-jsp标准标签库/" >Jstl-jsp标准标签库</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/21</span><a class="archive-post-title" href= "/2019/10/21/配置tomcat服务器/" >配置tomcat服务器</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/17</span><a class="archive-post-title" href= "/2019/10/17/XML详解/" >XML-1前提</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/12</span><a class="archive-post-title" href= "/2019/10/12/新建maven项目的配置及方式/" >新建maven项目的配置及方式</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/09</span><a class="archive-post-title" href= "/2019/10/09/数据库连接-JDBC-JDBC工具类库/" >数据库连接-JDBC*JDBC工具类库</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/26</span><a class="archive-post-title" href= "/2019/09/26/使用工具及下载等相关整理合集/" >使用工具及下载等相关整理合集</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/16</span><a class="archive-post-title" href= "/2019/09/16/JavaScript-1/" >JavaScript&&1</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/06</span><a class="archive-post-title" href= "/2019/09/06/Database2-SQL语言/" >Database2-SQL语言</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/04</span><a class="archive-post-title" href= "/2019/09/04/DataBase1/" >DataBase1</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/02</span><a class="archive-post-title" href= "/2019/09/02/CSS-lable/" >CSS-lable</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/29</span><a class="archive-post-title" href= "/2019/08/29/HTML-label/" >HTML&&label</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/20</span><a class="archive-post-title" href= "/2019/08/20/Thread/" >Thread</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/20</span><a class="archive-post-title" href= "/2019/08/20/IO流/" >IO流</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/19</span><a class="archive-post-title" href= "/2019/08/19/DataStructrue-Search-ClassicalProblem/" >DataStructrue-Search&&ClassicalProblem</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/19</span><a class="archive-post-title" href= "/2019/08/19/DataStructrue-sort/" >DataStructrue-sort</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/15</span><a class="archive-post-title" href= "/2019/08/15/Data-Structrue-Stack-Queue/" >Data Structrue-Stack&&Queue</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/13</span><a class="archive-post-title" href= "/2019/08/13/hello-world/" >Hello World</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="SearchClassical-Problem"><span class="iconfont-archer">&#xe606;</span>SearchClassical-Problem</span>
    
        <span class="sidebar-tag-name" data-tags="javaScript"><span class="iconfont-archer">&#xe606;</span>javaScript</span>
    
        <span class="sidebar-tag-name" data-tags="jstl"><span class="iconfont-archer">&#xe606;</span>jstl</span>
    
        <span class="sidebar-tag-name" data-tags="mybatis"><span class="iconfont-archer">&#xe606;</span>mybatis</span>
    
        <span class="sidebar-tag-name" data-tags="mybatis动态sql"><span class="iconfont-archer">&#xe606;</span>mybatis动态sql</span>
    
        <span class="sidebar-tag-name" data-tags="spring核心"><span class="iconfont-archer">&#xe606;</span>spring核心</span>
    
        <span class="sidebar-tag-name" data-tags="spring对其他类型参数的注入"><span class="iconfont-archer">&#xe606;</span>spring对其他类型参数的注入</span>
    
        <span class="sidebar-tag-name" data-tags="工具 下载"><span class="iconfont-archer">&#xe606;</span>工具 下载</span>
    
        <span class="sidebar-tag-name" data-tags="flex布局"><span class="iconfont-archer">&#xe606;</span>flex布局</span>
    
        <span class="sidebar-tag-name" data-tags="框架"><span class="iconfont-archer">&#xe606;</span>框架</span>
    
        <span class="sidebar-tag-name" data-tags="Tomcat"><span class="iconfont-archer">&#xe606;</span>Tomcat</span>
    
        <span class="sidebar-tag-name" data-tags="StackQueue"><span class="iconfont-archer">&#xe606;</span>StackQueue</span>
    
        <span class="sidebar-tag-name" data-tags="css"><span class="iconfont-archer">&#xe606;</span>css</span>
    
        <span class="sidebar-tag-name" data-tags="DataStructrue sort"><span class="iconfont-archer">&#xe606;</span>DataStructrue sort</span>
    
        <span class="sidebar-tag-name" data-tags="IO"><span class="iconfont-archer">&#xe606;</span>IO</span>
    
        <span class="sidebar-tag-name" data-tags="HTML"><span class="iconfont-archer">&#xe606;</span>HTML</span>
    
        <span class="sidebar-tag-name" data-tags="xml"><span class="iconfont-archer">&#xe606;</span>xml</span>
    
        <span class="sidebar-tag-name" data-tags="注解"><span class="iconfont-archer">&#xe606;</span>注解</span>
    
        <span class="sidebar-tag-name" data-tags="aop"><span class="iconfont-archer">&#xe606;</span>aop</span>
    
        <span class="sidebar-tag-name" data-tags="spring的自动装配（注解） spring数据库连接"><span class="iconfont-archer">&#xe606;</span>spring的自动装配（注解） spring数据库连接</span>
    
        <span class="sidebar-tag-name" data-tags="spring事务操作"><span class="iconfont-archer">&#xe606;</span>spring事务操作</span>
    
        <span class="sidebar-tag-name" data-tags="log4j"><span class="iconfont-archer">&#xe606;</span>log4j</span>
    
        <span class="sidebar-tag-name" data-tags="IntelliJ Eclipse maven项目 系统配置"><span class="iconfont-archer">&#xe606;</span>IntelliJ Eclipse maven项目 系统配置</span>
    
        <span class="sidebar-tag-name" data-tags="MySql"><span class="iconfont-archer">&#xe606;</span>MySql</span>
    
        <span class="sidebar-tag-name" data-tags="database"><span class="iconfont-archer">&#xe606;</span>database</span>
    
        <span class="sidebar-tag-name" data-tags="Thread"><span class="iconfont-archer">&#xe606;</span>Thread</span>
    
        <span class="sidebar-tag-name" data-tags="spring"><span class="iconfont-archer">&#xe606;</span>spring</span>
    
        <span class="sidebar-tag-name" data-tags="反射"><span class="iconfont-archer">&#xe606;</span>反射</span>
    
        <span class="sidebar-tag-name" data-tags="数据库连接池"><span class="iconfont-archer">&#xe606;</span>数据库连接池</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "Summer"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


